!function(){let e,t=!1;const o={},n=window.sessionStorage.getItem("kloe_z_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp"),i=window.sessionStorage.getItem("kloe_cid_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp"),l=window.kloeChatOptions||{},s=window.sessionStorage.getItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp_time"),d="true"===window.sessionStorage.getItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp_show");let a="true"===window.sessionStorage.getItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp_start"),c="true"===window.sessionStorage.getItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp_hide");if(s){const e=new Date(parseInt(s));new Date>e&&(window.sessionStorage.removeItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp"),a=!1,u())}function m(e){let t=window.sessionStorage.getItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp");if(t=t||function(){let e,t,o="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(o+="-"),o+=(12===e?4:16===e?3&t|8:t).toString(16);return o}(),window.sessionStorage.setItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp",t),u(),!e)return t;e(t)}function u(){const e=new Date;e.setHours(e.getHours()+24),window.sessionStorage.setItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp_time",e.getTime())}"Notification"in window&&"denied"!==Notification.permission&&Notification.requestPermission();const r={started:!1,name:"Estela",init:function(){if(this.started)return console.log("Kloe widget already init");this.started=!0,l.debug&&console.log("Loading widget");!function(){try{let n=document.getElementById("kloeMain");n||(n=document.body);const i="https://kloe-widget.proatecnologia.com.br/n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp/"+m()+"?token=cruzeiro&channel=web",s=document.createElement("style");s.type="text/css";const u=".kloeWidgetDiv {width: 381px;position: fixed;z-index: 5500000000;bottom: 0px;right: 0px;height: 85vh;transform: translate3d(0, 0, 0); -webkit-transform: translate3d(0, 0, 0); transform-style: preserve-3d; -webkit-transform-style: preserve-3d; backface-visibility: hidden; -webkit-backface-visibility: hidden} .kloeWidgetFrame {border: none;display: block;height: 100% !important;width: 100% !important;position: relative;top: 0px;left: auto;bottom: 0px;right: 0px;visibility: visible;z-index: 2147483647;max-height: 100vh;max-width: 100vw;transition: none;background-image: none;background-color: transparent;opacity: 1;pointer-events: auto;touch-action: auto;background-position: initial initial;background-repeat: initial initial;} .kloeWidgetHeader {width: 222px !important; height: 55px; position: absolute; margin-left: -111px; left: 50%; z-index: 5600000000; top: 0;} @media all and (max-width: 500px) {.kloeWidgetDiv {width: 100vw;height: 100vh !important;top: 0; left: 0; bottom: 0; overflow-y:auto;-webkit-overflow-scrolling:touch;}} .kloeFloat {display: none; visibility: visible;position: fixed;width: 160px !important;height: 60px;bottom: 30px;right: 30px;padding: 0;z-index: 2147483647;} .kloeButton {background: url(https://kloe-proa.s3.amazonaws.com/avatar/cruzeiro.png) #fff no-repeat; background-size: cover; cursor: pointer; width: 60px !important; height: 60px; padding: 0; box-shadow: 0 0 10px 1px #ccc; border-radius: 30px; z-index: 2147483647; display: block; position: absolute; right: 0; bottom: 0;}";s.styleSheet?s.styleSheet.cssText=u:s.appendChild(document.createTextNode(u)),document.getElementsByTagName("head")[0].appendChild(s);const p=document.createElement("div");p.id="kloeWidgetDiv",p.className="kloeWidgetDiv animated",p.style.display="none",n.appendChild(p),e=document.createElement("iframe"),e.src=i,e.id="kloeWidgetFrame",e.className="kloeWidgetFrame animated",e.allow="geolocation;autoplay;clipboard-read;clipboard-write",e.role="complementary",e.title="Kloe Messenger",e.sandbox="allow-same-origin allow-downloads allow-scripts allow-popups allow-popups-to-escape-sandbox allow-forms allow-top-navigation allow-modals geolocation",p.appendChild(e);const g=document.createElement("div");if(g.id="kloeWidgetHeader",g.className="kloeWidgetHeader",p.appendChild(g),"undefined".indexOf("true")>-1){let e,t,o,n,i=0,l=0,s=!1;g.addEventListener("mousedown",(e=>{s=!0,function(){const e=document.getElementById("kloeWidgetDiv").getBoundingClientRect();i=e.left,l=e.top}(),o=e.clientX-i,n=e.clientY-l})),g.addEventListener("mouseup",(()=>{s=!1,o=e,n=t})),g.addEventListener("mouseout",(()=>{s=!1,o=e,n=t})),document.addEventListener("mousemove",(d=>{d.preventDefault(),s&&(e=d.clientX-o,t=d.clientY-n,i=e,l=t,function(e,t){const o=document.getElementById("kloeWidgetDiv");o.style.left=e+"px",o.style.top=t+"px"}(e,t))}))}document.getElementById("kloeWidgetFrame").onload=function(){window.addEventListener("message",(function(n){if("https://kloe-widget.proatecnologia.com.br"!==n.origin)return;const i=n.data;var s;if(i)if(i.action&&"setSession"===i.action)window.sessionStorage.setItem(i.key,i.value);else if(i.action&&"removeSession"===i.action)window.sessionStorage.removeItem(i.key);else if(i.action&&"getListener"===i.action)o[i.key](i.value).then((()=>{e.contentWindow.postMessage({action:"posHandler",key:i.key,value:i.value},"https://kloe-widget.proatecnologia.com.br")}));else if(i.action&&"sendNotification"===i.action)s=i.value,"Notification"in window&&"granted"===Notification.permission&&!document.hasFocus()&&new Notification(s);else if(i.action&&"kloeClose"===i.action)r.close(!0);else{if("string"!=typeof i)return!1;"kloeCloseAndHide"===i?r.close(!0):"kloeClose"===i?r.close():"kloeShow"===i?r.show():"kloeHide"===i?r.hide():"kloeLoaded"===i&&(t=!0,l.identityToken&&r.updateIdentityToken(l.identityToken),l.context&&r.updateContext(l.context),a&&!c&&"false".indexOf("true")>-1?(e.contentWindow.postMessage("kloeOpened","https://kloe-widget.proatecnologia.com.br"),setTimeout(r.open,2e3)):(d||"none".indexOf("block")>-1)&&r.show())}})),r.find(),l.onLoad&&l.onLoad(r)}}catch(n){l.debug&&console.log(n.message)}}()},open:function(){t&&m((t=>{e.contentWindow.postMessage("kloeID:"+t,"https://kloe-widget.proatecnologia.com.br"),e.contentWindow.postMessage("kloeOpen","https://kloe-widget.proatecnologia.com.br"),n&&e.contentWindow.postMessage({action:"kloeZData",value:n},"https://kloe-widget.proatecnologia.com.br"),i&&e.contentWindow.postMessage({action:"kloeCookie",value:i},"https://kloe-widget.proatecnologia.com.br"),document.getElementById("kloeWidgetDiv").style.display="block",r.hide(),c=!1,window.sessionStorage.setItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp_hide",c),r.log("KLOEOPEN")}))},close:function(e){document.getElementById("kloeWidgetDiv").style.display="none";document.getElementById("kloeWidgetFloat")&&!e&&r.show(),e&&r.hide(),c=!0,window.sessionStorage.setItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp_hide",c)},show:function(){if(t){let e=document.getElementById("kloeMain");e||(e=document.body);const t=document.getElementById("kloeWidgetFloat");if(t)t.setAttribute("style","display: block!important"),t.style.visibility="visible";else{const t=document.createElement("div");t.id="kloeWidgetFloat",t.className="kloeFloat",t.setAttribute("tabindex","0"),t.setAttribute("role","application"),t.title="Fale com: Estela";if("false".indexOf("true")>-1){const e=document.createElement("p");e.className="kloePhrase",e.title="Fale com: Estela",e.textContent="OlÃ¡, posso ajudar?",e.onclick=r.open,e.onkeydown=function(e){13===e.keyCode&&r.open()},t.appendChild(e),setTimeout((()=>e.style.display="block"),2e3)}if("undefined".indexOf("true")>-1){const e=document.createElement("div");t.appendChild(e),t.setAttribute("style","display: block!important"),t.style.visibility="visible";const o=document.createElement("img");o.src="",e.appendChild(o);const n=document.createElement("span");n.textContent="Central de ajuda",e.appendChild(n),t.onclick=r.open,t.onkeydown=function(e){13===e.keyCode&&r.open()}}else{const e=document.createElement("div");e.className="kloeButton",e.title="Fale com: Estela",e.onclick=r.open,e.onkeydown=function(e){13===e.keyCode&&r.open()},t.appendChild(e)}e.appendChild(t)}window.sessionStorage.setItem("kloe_id_n8VySEDmI69V2R3GG6LNK8KpGlUdF3227AR0OJPp_show",!0),r.log("KLOESHOW")}t||setTimeout(r.show,500)},hide:function(){const e=document.getElementById("kloeWidgetFloat");e&&(e.setAttribute("style","display: none!important"),e.style.visibility="hidden")},find:function(){l.debug&&console.log("Search widget buttons");const e=document.getElementsByClassName("kloeOpenBox");e&&[].forEach.call(e,(e=>{e.onclick=()=>{r.open()}}))},logout:function(){t=!1,this.close(),e.contentWindow.postMessage("kloeLogout","https://kloe-widget.proatecnologia.com.br"),r.log("KLOELOGOUT")},updateIdentityToken:function(t){e.contentWindow.postMessage(`kloeToken:${t}`,"https://kloe-widget.proatecnologia.com.br"),r.log("KLOEUPDATEIDENTITYTOKEN")},updateContext:function(t){e.contentWindow.postMessage({action:"setContext",value:t},"https://kloe-widget.proatecnologia.com.br"),r.log("KLOEUPDATECONTEXT")},on:function({type:t,handler:n}){"pre:receive"===t&&(o[t]=async e=>{await n(e)}),e.contentWindow.postMessage({action:"setListener",key:t},"https://kloe-widget.proatecnologia.com.br")},off:function(){},sendMessage:function(t){setTimeout((()=>{e.contentWindow.postMessage({action:"sendMessage",value:t},"https://kloe-widget.proatecnologia.com.br")}),1500)},log:function(t){setTimeout((()=>{e.contentWindow.postMessage({action:"kloeLog",value:t},"https://kloe-widget.proatecnologia.com.br")}),1500)},debug:function(){e.contentWindow.postMessage("kloeDebug","https://kloe-widget.proatecnologia.com.br")}};window.kloe&&window.kloe.started||(window.kloe=r,window.kloe.init())}();